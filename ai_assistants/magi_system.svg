<svg viewBox="0 0 1400 1800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="700" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#FFFFFF">
    Multi-Agent LLM Server Architecture
  </text>
  <text x="700" y="55" font-size="14" text-anchor="middle" fill="#FFFFFF">
    12-Agent System with 3√ó GPU Configuration
  </text>
  
  <!-- Main Server Box -->
  <rect x="50" y="80" width="1300" height="1680" fill="#1A1A1A" stroke="#EA6020" stroke-width="3" rx="10"/>
  <text x="700" y="110" font-size="18" font-weight="bold" text-anchor="middle" fill="#FFFFFF">
    Server Hardware (Rackmount 4U / Tower)
  </text>
  
  <!-- Hardware Layer -->
  <g id="hardware-layer">
    <!-- CPU Section -->
    <rect x="100" y="140" width="280" height="120" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="240" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#FFFFFF">CPU</text>
    <text x="240" y="185" font-size="11" text-anchor="middle" fill="#FFFFFF">AMD EPYC 7443P</text>
    <text x="240" y="202" font-size="10" text-anchor="middle" fill="#FFFFFF">24 cores / 48 threads</text>
    <text x="240" y="219" font-size="10" text-anchor="middle" fill="#FFFFFF">128 PCIe Gen4 lanes</text>
    <text x="240" y="236" font-size="10" text-anchor="middle" fill="#FFFFFF">Handles orchestration</text>
    <text x="240" y="253" font-size="10" text-anchor="middle" fill="#FFFFFF">& load balancing</text>
    
    <!-- RAM Section -->
    <rect x="400" y="140" width="280" height="120" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="540" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#FFFFFF">System RAM</text>
    <text x="540" y="185" font-size="11" text-anchor="middle" fill="#FFFFFF">256GB DDR4 ECC</text>
    <text x="540" y="202" font-size="10" text-anchor="middle" fill="#FFFFFF">8√ó 32GB modules</text>
    <text x="540" y="219" font-size="10" text-anchor="middle" fill="#FFFFFF">Agent state & cache</text>
    <text x="540" y="236" font-size="10" text-anchor="middle" fill="#FFFFFF">Vector stores</text>
    <text x="540" y="253" font-size="10" text-anchor="middle" fill="#FFFFFF">Processing buffers</text>
    
    <!-- PSU Section -->
    <rect x="700" y="140" width="280" height="120" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="840" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Power Supply</text>
    <text x="840" y="185" font-size="11" text-anchor="middle" fill="#FFFFFF">2000W Platinum</text>
    <text x="840" y="202" font-size="10" text-anchor="middle" fill="#FFFFFF">Single rail design</text>
    <text x="840" y="219" font-size="10" text-anchor="middle" fill="#FFFFFF">3√ó GPU: ~1050W</text>
    <text x="840" y="236" font-size="10" text-anchor="middle" fill="#FFFFFF">CPU: ~200W</text>
    <text x="840" y="253" font-size="10" text-anchor="middle" fill="#FFFFFF">Overhead: 750W</text>
    
    <!-- Motherboard -->
    <rect x="1000" y="140" width="280" height="120" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="1140" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Motherboard</text>
    <text x="1140" y="185" font-size="11" text-anchor="middle" fill="#FFFFFF">Supermicro H12SSL-i</text>
    <text x="1140" y="202" font-size="10" text-anchor="middle" fill="#FFFFFF">4√ó PCIe x16 slots</text>
    <text x="1140" y="219" font-size="10" text-anchor="middle" fill="#FFFFFF">IPMI for remote mgmt</text>
    <text x="1140" y="236" font-size="10" text-anchor="middle" fill="#FFFFFF">Dual 10GbE NICs</text>
  </g>
  
  <!-- GPU Layer -->
  <g id="gpu-layer">
    <text x="100" y="300" font-size="16" font-weight="bold" fill="#FFFFFF">GPU Layer (PCIe x16)</text>
    
    <!-- GPU 0 -->
    <rect x="100" y="320" width="380" height="180" fill="#333333" stroke="#EA6020" stroke-width="3" rx="5"/>
    <text x="290" y="345" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">GPU 0: RTX 3090</text>
    <text x="290" y="365" font-size="11" text-anchor="middle" fill="#FFFFFF">24GB GDDR6X ‚Ä¢ 10496 CUDA cores</text>
    <text x="290" y="385" font-size="10" text-anchor="middle" fill="#FFFFFF">CUDA_VISIBLE_DEVICES=0</text>
    <rect x="120" y="400" width="340" height="85" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="290" y="420" font-size="11" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Ollama Instance: Port 11434</text>
    <text x="290" y="438" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ 4 agents concurrent (6GB each)</text>
    <text x="290" y="453" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Web Research, Doc Analysis</text>
    <text x="290" y="468" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Code Review, Data Analysis</text>
    <text x="290" y="483" font-size="9" text-anchor="middle" fill="#FFFFFF">~30-35 tokens/sec per agent</text>
    
    <!-- GPU 1 -->
    <rect x="510" y="320" width="380" height="180" fill="#333333" stroke="#EA6020" stroke-width="3" rx="5"/>
    <text x="700" y="345" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">GPU 1: RTX 3090</text>
    <text x="700" y="365" font-size="11" text-anchor="middle" fill="#FFFFFF">24GB GDDR6X ‚Ä¢ 10496 CUDA cores</text>
    <text x="700" y="385" font-size="10" text-anchor="middle" fill="#FFFFFF">CUDA_VISIBLE_DEVICES=1</text>
    <rect x="530" y="400" width="340" height="85" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="700" y="420" font-size="11" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Ollama Instance: Port 11435</text>
    <text x="700" y="438" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ 4 agents concurrent (6GB each)</text>
    <text x="700" y="453" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ API Research, Legal Analysis</text>
    <text x="700" y="468" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Tech Review, + 1 Research Agent</text>
    <text x="700" y="483" font-size="9" text-anchor="middle" fill="#FFFFFF">~30-35 tokens/sec per agent</text>
    
    <!-- GPU 2 -->
    <rect x="920" y="320" width="380" height="180" fill="#333333" stroke="#EA6020" stroke-width="3" rx="5"/>
    <text x="1110" y="345" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">GPU 2: RTX 3090</text>
    <text x="1110" y="365" font-size="11" text-anchor="middle" fill="#FFFFFF">24GB GDDR6X ‚Ä¢ 10496 CUDA cores</text>
    <text x="1110" y="385" font-size="10" text-anchor="middle" fill="#FFFFFF">CUDA_VISIBLE_DEVICES=2</text>
    <rect x="940" y="400" width="340" height="85" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="1110" y="420" font-size="11" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Ollama Instance: Port 11436</text>
    <text x="1110" y="438" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ 4 agents concurrent (6GB each)</text>
    <text x="1110" y="453" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Business Analysis, Academic Research</text>
    <text x="1110" y="468" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Coordinator (Control), Validator (Control)</text>
    <text x="1110" y="483" font-size="9" text-anchor="middle" fill="#FFFFFF">~30-35 tokens/sec per agent</text>
  </g>
  
  <!-- Storage Layer -->
  <g id="storage-layer">
    <text x="100" y="540" font-size="16" font-weight="bold" fill="#FFFFFF">Storage Hierarchy (Tiered)</text>
    
    <!-- Tier 1: NVMe Hot -->
    <rect x="100" y="560" width="380" height="140" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="290" y="585" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">Tier 1: NVMe (Hot Storage)</text>
    <text x="290" y="605" font-size="11" text-anchor="middle" fill="#FFFFFF">Samsung 990 Pro 4TB Gen4</text>
    <text x="290" y="622" font-size="10" text-anchor="middle" fill="#FFFFFF">7,450 MB/s read ‚Ä¢ 6,900 MB/s write</text>
    <text x="290" y="642" font-size="10" text-anchor="middle" fill="#FFFFFF">üìÅ /mnt/storage/models (150GB)</text>
    <text x="290" y="658" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Shared Ollama model library</text>
    <text x="290" y="673" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Active vector databases</text>
    <text x="290" y="688" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Real-time agent cache</text>
    
    <!-- Tier 2: SATA Warm -->
    <rect x="510" y="560" width="380" height="140" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="700" y="585" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">Tier 2: SATA SSD (Warm)</text>
    <text x="700" y="605" font-size="11" text-anchor="middle" fill="#FFFFFF">Samsung 870 QVO 8TB</text>
    <text x="700" y="622" font-size="10" text-anchor="middle" fill="#FFFFFF">560 MB/s read ‚Ä¢ 530 MB/s write</text>
    <text x="700" y="642" font-size="10" text-anchor="middle" fill="#FFFFFF">üìÅ /mnt/ssd-data (2TB used)</text>
    <text x="700" y="658" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Agent output results</text>
    <text x="700" y="673" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Training datasets</text>
    <text x="700" y="688" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Historical logs (30-90 days)</text>
    
    <!-- Tier 3: HDD Cold -->
    <rect x="920" y="560" width="380" height="140" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="1110" y="585" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">Tier 3: HDD RAID 10 (Cold)</text>
    <text x="1110" y="605" font-size="11" text-anchor="middle" fill="#FFFFFF">4√ó WD Red Plus 8TB</text>
    <text x="1110" y="622" font-size="10" text-anchor="middle" fill="#FFFFFF">16TB usable ‚Ä¢ 190 MB/s sustained</text>
    <text x="1110" y="642" font-size="10" text-anchor="middle" fill="#FFFFFF">üìÅ /mnt/archive (4TB used)</text>
    <text x="1110" y="658" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Compressed backups</text>
    <text x="1110" y="673" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Old model versions</text>
    <text x="1110" y="688" font-size="9" text-anchor="middle" fill="#FFFFFF">‚Ä¢ Long-term datasets (>90 days)</text>
  </g>
  
  <!-- Software Stack -->
  <g id="software-layer">
    <text x="100" y="740" font-size="16" font-weight="bold" fill="#FFFFFF">Software Stack & Services</text>
    
    <!-- OS Layer -->
    <rect x="100" y="760" width="1200" height="60" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="700" y="785" font-size="13" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Operating System: Ubuntu Server 22.04 LTS</text>
    <text x="700" y="805" font-size="10" text-anchor="middle" fill="#FFFFFF">NVIDIA Driver 535 ‚Ä¢ CUDA 12.2 ‚Ä¢ Docker 24.0 ‚Ä¢ Python 3.11 ‚Ä¢ SystemD Service Management</text>
    
    <!-- Container Layer -->
    <rect x="100" y="840" width="580" height="100" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="390" y="865" font-size="13" font-weight="bold" text-anchor="middle" fill="#EA6020">Container Services (Docker Compose)</text>
    <text x="390" y="885" font-size="10" text-anchor="middle" fill="#FFFFFF">üê≥ PostgreSQL 16 (Agent state & results)</text>
    <text x="390" y="902" font-size="10" text-anchor="middle" fill="#FFFFFF">üê≥ Redis 7 (Cache & message queue)</text>
    <text x="390" y="919" font-size="10" text-anchor="middle" fill="#FFFFFF">üê≥ Prometheus (Metrics collection)</text>
    <text x="390" y="936" font-size="10" text-anchor="middle" fill="#FFFFFF">üê≥ Grafana (Monitoring dashboards)</text>
    
    <!-- Ollama Services -->
    <rect x="720" y="840" width="580" height="100" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="1010" y="865" font-size="13" font-weight="bold" text-anchor="middle" fill="#EA6020">Ollama Services (SystemD)</text>
    <text x="1010" y="885" font-size="10" text-anchor="middle" fill="#FFFFFF">‚öôÔ∏è ollama-gpu0.service ‚Üí localhost:11434</text>
    <text x="1010" y="902" font-size="10" text-anchor="middle" fill="#FFFFFF">‚öôÔ∏è ollama-gpu1.service ‚Üí localhost:11435</text>
    <text x="1010" y="919" font-size="10" text-anchor="middle" fill="#FFFFFF">‚öôÔ∏è ollama-gpu2.service ‚Üí localhost:11436</text>
    <text x="1010" y="936" font-size="10" text-anchor="middle" fill="#FFFFFF">Shared model directory: /mnt/storage/models</text>
  </g>
  
  <!-- Agent Architecture -->
  <g id="agent-layer">
    <text x="100" y="980" font-size="16" font-weight="bold" fill="#FFFFFF">Multi-Agent Architecture (12 Agents Total)</text>
    
    <!-- Research Agents -->
    <rect x="100" y="1000" width="800" height="240" fill="#333333" stroke="#EA6020" stroke-width="3" rx="5"/>
    <text x="500" y="1025" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">Research Agents (9 Total)</text>
    <text x="500" y="1043" font-size="10" text-anchor="middle" fill="#FFFFFF">Load-balanced across all 3 GPUs</text>
    
    <!-- Agent Grid -->
    <rect x="120" y="1055" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="235" y="1075" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 1: Web Research</text>
    <text x="235" y="1090" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: qwen2.5:7b-q4_k_m</text>
    <text x="235" y="1103" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU0 ‚Ä¢ Port 11434</text>
    
    <rect x="370" y="1055" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="485" y="1075" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 2: Doc Analysis</text>
    <text x="485" y="1090" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: llama3.1:8b-q4_k_m</text>
    <text x="485" y="1103" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU0 ‚Ä¢ Port 11434</text>
    
    <rect x="620" y="1055" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="735" y="1075" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 3: Code Review</text>
    <text x="735" y="1090" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: mistral:7b-q4_k_m</text>
    <text x="735" y="1103" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU0 ‚Ä¢ Port 11434</text>
    
    <rect x="120" y="1120" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="235" y="1140" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 4: Data Analysis</text>
    <text x="235" y="1155" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: qwen2.5:7b-q4_k_m</text>
    <text x="235" y="1168" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU1 ‚Ä¢ Port 11435</text>
    
    <rect x="370" y="1120" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="485" y="1140" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 5: API Research</text>
    <text x="485" y="1155" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: llama3.1:8b-q4_k_m</text>
    <text x="485" y="1168" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU1 ‚Ä¢ Port 11435</text>
    
    <rect x="620" y="1120" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="735" y="1140" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 6: Legal Analysis</text>
    <text x="735" y="1155" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: mistral:7b-q4_k_m</text>
    <text x="735" y="1168" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU1 ‚Ä¢ Port 11435</text>
    
    <rect x="120" y="1185" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="235" y="1205" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 7: Tech Review</text>
    <text x="235" y="1220" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: qwen2.5:7b-q4_k_m</text>
    <text x="235" y="1233" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU2 ‚Ä¢ Port 11436</text>
    
    <rect x="370" y="1185" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="485" y="1205" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 8: Business Analysis</text>
    <text x="485" y="1220" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: llama3.1:8b-q4_k_m</text>
    <text x="485" y="1233" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU2 ‚Ä¢ Port 11436</text>
    
    <rect x="620" y="1185" width="230" height="55" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="735" y="1205" font-size="10" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Agent 9: Academic Research</text>
    <text x="735" y="1220" font-size="8" text-anchor="middle" fill="#FFFFFF">Model: mistral:7b-q4_k_m</text>
    <text x="735" y="1233" font-size="8" text-anchor="middle" fill="#FFFFFF">GPU2 ‚Ä¢ Port 11436</text>
    
    <!-- Control Agents -->
    <rect x="930" y="1000" width="370" height="240" fill="#333333" stroke="#EA6020" stroke-width="3" rx="5"/>
    <text x="1115" y="1025" font-size="14" font-weight="bold" text-anchor="middle" fill="#EA6020">Control Agents (3 Total)</text>
    <text x="1115" y="1043" font-size="10" text-anchor="middle" fill="#FFFFFF">Orchestration & Validation</text>
    
    <rect x="950" y="1060" width="330" height="50" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="1115" y="1080" font-size="11" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Coordinator Agent</text>
    <text x="1115" y="1095" font-size="8" text-anchor="middle" fill="#FFFFFF">Distributes tasks to research agents</text>
    <text x="1115" y="1107" font-size="8" text-anchor="middle" fill="#FFFFFF">qwen2.5:7b-q4_k_m ‚Ä¢ GPU0:11434</text>
    
    <rect x="950" y="1120" width="330" height="50" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="1115" y="1140" font-size="11" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Validator Agent</text>
    <text x="1115" y="1155" font-size="8" text-anchor="middle" fill="#FFFFFF">Checks quality & consistency</text>
    <text x="1115" y="1167" font-size="8" text-anchor="middle" fill="#FFFFFF">llama3.1:8b-q4_k_m ‚Ä¢ GPU1:11435</text>
    
    <rect x="950" y="1180" width="330" height="50" fill="#1A1A1A" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="1115" y="1200" font-size="11" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Aggregator Agent</text>
    <text x="1115" y="1215" font-size="8" text-anchor="middle" fill="#FFFFFF">Synthesizes final report</text>
    <text x="1115" y="1227" font-size="8" text-anchor="middle" fill="#FFFFFF">mistral:7b-q4_k_m ‚Ä¢ GPU2:11436</text>
  </g>
  
  <!-- Workflow Process -->
  <g id="workflow">
    <text x="100" y="1280" font-size="16" font-weight="bold" fill="#FFFFFF">Execution Workflow (Magi Consensus)</text>
    
    <rect x="100" y="1300" width="1200" height="200" fill="#1A1A1A" stroke="#EA6020" stroke-width="2" rx="5"/>
    
    <!-- Phase 1 -->
    <circle cx="180" cy="1360" r="35" fill="#333333" stroke="#EA6020" stroke-width="2"/>
    <text x="180" y="1355" font-size="20" font-weight="bold" text-anchor="middle" fill="#EA6020">1</text>
    <text x="180" y="1373" font-size="8" text-anchor="middle" fill="#FFFFFF">COORD</text>
    <text x="180" y="1410" font-size="10" text-anchor="middle" fill="#FFFFFF">Coordinator</text>
    <text x="180" y="1425" font-size="9" text-anchor="middle" fill="#FFFFFF">3-5 sec</text>
    
    <!-- Arrow -->
    <path d="M 215 1360 L 275 1360" stroke="#EA6020" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Phase 2 -->
    <circle cx="340" cy="1360" r="35" fill="#333333" stroke="#EA6020" stroke-width="2"/>
    <text x="340" y="1355" font-size="20" font-weight="bold" text-anchor="middle" fill="#EA6020">2</text>
    <text x="340" y="1373" font-size="8" text-anchor="middle" fill="#FFFFFF">RESEARCH</text>
    <text x="340" y="1410" font-size="10" text-anchor="middle" fill="#FFFFFF">9 Agents Parallel</text>
    <text x="340" y="1425" font-size="9" text-anchor="middle" fill="#FFFFFF">8-12 sec</text>
    
    <!-- Arrow -->
    <path d="M 375 1360 L 435 1360" stroke="#EA6020" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Phase 3 -->
    <circle cx="500" cy="1360" r="35" fill="#333333" stroke="#EA6020" stroke-width="2"/>
    <text x="500" y="1355" font-size="20" font-weight="bold" text-anchor="middle" fill="#EA6020">3</text>
    <text x="500" y="1373" font-size="8" text-anchor="middle" fill="#FFFFFF">VALIDATE</text>
    <text x="500" y="1410" font-size="10" text-anchor="middle" fill="#FFFFFF">Validator</text>
    <text x="500" y="1425" font-size="9" text-anchor="middle" fill="#FFFFFF">2-4 sec</text>
    
<!-- Arrow -->
    <path d="M 535 1360 L 595 1360" stroke="#EA6020" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Phase 4 -->
    <circle cx="660" cy="1360" r="35" fill="#333333" stroke="#EA6020" stroke-width="2"/>
    <text x="660" y="1355" font-size="20" font-weight="bold" text-anchor="middle" fill="#EA6020">4</text>
    <text x="660" y="1373" font-size="8" text-anchor="middle" fill="#FFFFFF">CONSENSUS</text>
    <text x="660" y="1410" font-size="10" text-anchor="middle" fill="#FFFFFF">Vote (2/3 or 3/5)</text>
    <text x="660" y="1425" font-size="9" text-anchor="middle" fill="#FFFFFF">&lt;1 sec</text>
    
    <!-- Arrow -->
    <path d="M 695 1360 L 755 1360" stroke="#EA6020" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Phase 5 -->
    <circle cx="820" cy="1360" r="35" fill="#333333" stroke="#EA6020" stroke-width="2"/>
    <text x="820" y="1355" font-size="20" font-weight="bold" text-anchor="middle" fill="#EA6020">5</text>
    <text x="820" y="1373" font-size="8" text-anchor="middle" fill="#FFFFFF">AGGREGATE</text>
    <text x="820" y="1410" font-size="10" text-anchor="middle" fill="#FFFFFF">Aggregator</text>
    <text x="820" y="1425" font-size="9" text-anchor="middle" fill="#FFFFFF">3-5 sec</text>
    
    <!-- Arrow -->
    <path d="M 855 1360 L 915 1360" stroke="#EA6020" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Final Output -->
    <rect x="950" y="1330" width="140" height="60" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="1020" y="1355" font-size="12" font-weight="bold" text-anchor="middle" fill="#EA6020">‚úì Final Report</text>
    <text x="1020" y="1375" font-size="9" text-anchor="middle" fill="#FFFFFF">Total: 15-25 sec</text>
    
    <!-- Timeline -->
    <text x="1150" y="1320" font-size="11" font-weight="bold" fill="#FFFFFF">Timeline:</text>
    <text x="1150" y="1340" font-size="9" fill="#FFFFFF">0-5s: Coordinate</text>
    <text x="1150" y="1355" font-size="9" fill="#FFFFFF">5-17s: Research</text>
    <text x="1150" y="1370" font-size="9" fill="#FFFFFF">17-21s: Validate</text>
    <text x="1150" y="1385" font-size="9" fill="#FFFFFF">21-22s: Consensus</text>
    <text x="1150" y="1400" font-size="9" fill="#FFFFFF">22-27s: Aggregate</text>
    
    <!-- Parallel indicator -->
    <text x="340" y="1450" font-size="9" font-style="italic" text-anchor="middle" fill="#EA6020">‚ö° 9 agents execute simultaneously</text>
    <text x="340" y="1465" font-size="9" font-style="italic" text-anchor="middle" fill="#EA6020">across 3 GPUs (3 per GPU)</text>
  </g>
  
  <!-- Network & Access Layer -->
  <g id="network-layer">
    <text x="100" y="1540" font-size="16" font-weight="bold" fill="#FFFFFF">Network & Remote Access</text>
    
    <!-- Load Balancer -->
    <rect x="100" y="1560" width="380" height="100" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="290" y="1585" font-size="13" font-weight="bold" text-anchor="middle" fill="#EA6020">Internal Load Balancer</text>
    <text x="290" y="1605" font-size="10" text-anchor="middle" fill="#FFFFFF">Round-robin distribution</text>
    <text x="290" y="1622" font-size="9" text-anchor="middle" fill="#FFFFFF">localhost:11434 ‚Üí GPU0</text>
    <text x="290" y="1637" font-size="9" text-anchor="middle" fill="#FFFFFF">localhost:11435 ‚Üí GPU1</text>
    <text x="290" y="1652" font-size="9" text-anchor="middle" fill="#FFFFFF">localhost:11436 ‚Üí GPU2</text>
    
    <!-- API Server -->
    <rect x="510" y="1560" width="380" height="100" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="700" y="1585" font-size="13" font-weight="bold" text-anchor="middle" fill="#EA6020">FastAPI Server</text>
    <text x="700" y="1605" font-size="10" text-anchor="middle" fill="#FFFFFF">Port 8000 (internal)</text>
    <text x="700" y="1622" font-size="9" text-anchor="middle" fill="#FFFFFF">REST API endpoints</text>
    <text x="700" y="1637" font-size="9" text-anchor="middle" fill="#FFFFFF">/api/agent/query</text>
    <text x="700" y="1652" font-size="9" text-anchor="middle" fill="#FFFFFF">/api/agent/batch</text>
    
    <!-- Nginx Proxy -->
    <rect x="920" y="1560" width="380" height="100" fill="#333333" stroke="#EA6020" stroke-width="2" rx="5"/>
    <text x="1110" y="1585" font-size="13" font-weight="bold" text-anchor="middle" fill="#EA6020">Nginx Reverse Proxy</text>
    <text x="1110" y="1605" font-size="10" text-anchor="middle" fill="#FFFFFF">Ports 80/443 (HTTPS)</text>
    <text x="1110" y="1622" font-size="9" text-anchor="middle" fill="#FFFFFF">SSL/TLS termination</text>
    <text x="1110" y="1637" font-size="9" text-anchor="middle" fill="#FFFFFF">Rate limiting</text>
    <text x="1110" y="1652" font-size="9" text-anchor="middle" fill="#FFFFFF">Authentication</text>
  </g>
  
  <!-- External Access -->
  <g id="external-access">
    <text x="100" y="1700" font-size="16" font-weight="bold" fill="#FFFFFF">External Access Points</text>
    
    <!-- SSH -->
    <rect x="100" y="1720" width="220" height="30" fill="#333333" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="210" y="1740" font-size="10" text-anchor="middle" fill="#FFFFFF">üîê SSH (Port 22)</text>
    
    <!-- HTTPS API -->
    <rect x="340" y="1720" width="220" height="30" fill="#333333" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="450" y="1740" font-size="10" text-anchor="middle" fill="#FFFFFF">üåê HTTPS API (Port 443)</text>
    
    <!-- Monitoring -->
    <rect x="580" y="1720" width="220" height="30" fill="#333333" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="690" y="1740" font-size="10" text-anchor="middle" fill="#FFFFFF">üìä Grafana (Port 3000)</text>
    
    <!-- VPN -->
    <rect x="820" y="1720" width="220" height="30" fill="#333333" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="930" y="1740" font-size="10" text-anchor="middle" fill="#FFFFFF">üîí VPN/Tailscale</text>
    
    <!-- Direct Ollama -->
    <rect x="1060" y="1720" width="220" height="30" fill="#333333" stroke="#EA6020" stroke-width="1" rx="3"/>
    <text x="1170" y="1740" font-size="10" text-anchor="middle" fill="#FFFFFF">üîß Direct Ollama (dev only)</text>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#EA6020"/>
    </marker>
  </defs>
  
  <!-- Legend/Stats Box -->
  <rect x="100" y="1680" width="1200" height="1" fill="#EA6020"/>
  
  <!-- Bottom Stats -->
  <g id="stats">
    <rect x="100" y="1565" width="1200" height="1" fill="#EA6020"/>
  </g>
</svg>
